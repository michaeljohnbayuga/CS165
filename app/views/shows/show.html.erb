<%= render :file=> 'app/views/partials/header.html.erb' %>

<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">

<style type="text/css">
.checked {
    color: gold;
}

div.stars {
  width: 250px;
  float: top;
  display: inline-block;
}

input.star { display: none; }

label.star {
  float: right;
  padding: 3px;
  font-size: 20px;
  color: #444;
  transition: all .2s;
}

input.star:checked ~ label.star:before {
  content: '\f005';
  color: #FD4;
  transition: all .25s;
}

input.star-5:checked ~ label.star:before {
  color: #FE7;
  text-shadow: 0 0 20px #952;
}

input.star-1:checked ~ label.star:before { color: #F62; }

label.star:hover { transform: rotate(-15deg) scale(1.3); }

label.star:before {
  content: '\f006';
  font-family: FontAwesome;
}

</style>


<div class="ui container">
  
  <h1><%= @show.name %><br>
  Community Average Rating: <%= @ave_rating %>  &emsp; </h1>

  <% if current_user.present? %>
  
  	<% if current_user.is_admin? %>
  
    <%= link_to "<i class='edit large icon'></i> Edit".html_safe, {action: "edit", id: @show.id}, style: 'color:#fff;', class: 'ui blue button float-right' %>
  
    <% end %>
  
  	<!-- Checks if the user has already favorited the show then displays the appropriate link  -->
    <%- unless current_user.favorite_shows.exists?(id: @show.id) -%>
      <%= link_to 'Add to favorites', favorite_shows_path(show_id: @show), method: :post, style:'color:#fff;',class:'ui blue button float-right'%>
      <%- else -%>
      <%= link_to 'Remove from favorites', favorite_show_path(@show), method: :delete, style:'color:#fff;',class:'ui blue button float-right'%>
      <%- end -%>
  
  <% end %>
  
  <% if @show.attachment.present? %>
  	<img src="<%= @show.attachment %>" class="ui large image" id="show_logo" style="width:500px; height:500px;object-fit: contain; border: 7px solid #BBDEFB; background-color:#4f5563 ">
  <% else %>
    <img src="/logos/SAMPLE.jpg" class="ui large image" id="show_logo" style="width:500px; height:500px;object-fit: contain; border: 7px solid #BBDEFB; background-color:#4f5563 ">
  <% end %>
  
   
	<% if current_user.present? %> 
	
	<h3>Your Rating: <%= @user_rating %>  &emsp; </h3>	
	
  <script type="text/javascript">$(document).ready(function(){$(".rating").rating({initialRating: <%=@user_rating%>,maxrating:5});});</script>
	<div class=" massive ui star rating">
  <%= link_to "<i class=''></i>".html_safe, {controller: "ratings", action: "rate1", id: @show.id}, method: :POST, class: "star star-1 icon" %>
  <%= link_to "<i class=''></i>".html_safe, {controller: "ratings", action: "rate2", id: @show.id}, method: :POST, class: "star star-2 icon" %>
  <%= link_to "<i class=''></i>".html_safe, {controller: "ratings", action: "rate3", id: @show.id}, method: :POST, class: "star star-3 icon" %>
  <%= link_to "<i class=''></i>".html_safe, {controller: "ratings", action: "rate4", id: @show.id}, method: :POST, class: "star star-4 icon" %>
  <%= link_to "<i class=''></i>".html_safe, {controller: "ratings", action: "rate5", id: @show.id}, method: :POST, class: "star star-5 icon" 
  %>
	
	</div>	

	<% end %>

  <% if @show.network.present? %>
    <br><br><b>TV Network:</b> <%= @show.network %>
  <% end %>
  
  <br><br><b>Casts:</b> <%= @show.casts %>
  
  <br><br><b>Director:</b> <%= @show.director %>
  
  <br><br><b>Synopsis:</b> <%= @show.synopsis %>
  
  <br><br><b>Runtime per episode:</b> <%= @show.runtime %>
  
  <br><br><b>Language:</b> <%= @show.language %>

  <% if @show.start_year.present? %>
    <br><br><b>Years aired: </b><%= @show.start_year %>

    <% if @show.end_year.present? && (@show.start_year != @show.end_year) %>
    - <%= @show.end_year %>
    <% end %>

  
  <% end %>

  <br><br><br><br><br><br><br>

  <%= link_to "<i class='edit large icon'></i> View Reviews".html_safe, {controller: "reviews", action: "create", id: @show.id}, style: 'color:#fff;', class: 'ui compact blue button' %>
</div>
